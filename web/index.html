<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Info Kedinasan AI</title>

    <script type="module">
      import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

      // PERBAIKAN: API Key sekarang menggunakan tanda kutip agar terbaca sebagai teks
      const genAI = new GoogleGenerativeAI("AIzaSyCB6IAsQ7X66U_-BtcL6AbiziFnX1TGReI");

      window.sendToGemini = async function (text) {
        try {
          // Menggunakan model gemini-1.5-flash untuk menghindari error 404
          const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

          const prompt =
            "Anda adalah pakar sekolah kedinasan Indonesia. Jawab dengan jelas:\n" +
            text;

          const result = await model.generateContent(prompt);
          const response = await result.response;
          return response.text();
        } catch (e) {
          // Menampilkan pesan error jika terjadi kegagalan koneksi atau API
          return "‚ùå Error API: " + e.message;
        }
      };
    </script>
  </head>

  <body>
    <script src="flutter_bootstrap.js" async></script>
  </body>
</html>