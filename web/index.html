<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Info Kedinasan AI</title>

    <script type="module">
      import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

      // PERBAIKAN: API Key harus diapit tanda kutip " "
      const genAI = new GoogleGenerativeAI("AIzaSyCB6IAsQ7X66U_-BtcL6AbiziFnX1TGReI");

      window.sendToGemini = async function (text) {
        try {
          // Model gemini-1.5-flash sudah benar
          const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

          const prompt =
            "Anda adalah pakar sekolah kedinasan Indonesia. Jawab dengan jelas:\n" +
            text;

          const result = await model.generateContent(prompt);
          const response = await result.response;
          return response.text();
        } catch (e) {
          // Akan menampilkan pesan error ke UI jika gagal
          return "‚ùå Error API: " + e.message;
        }
      };
    </script>
  </head>

  <body>
    <script src="flutter_bootstrap.js" async></script>
  </body>
</html>